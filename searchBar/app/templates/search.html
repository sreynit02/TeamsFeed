{%extends 'base.html' %}
<!-- <script {{url_for('static',filename="/app/static/index.js")}}></script> -->
{% block main %}
<script type="text/javascript"
src="{{ url_for('static', filename='search.js') }}"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<p id="results">{{searchResults}}</p>
<p id="results">{{variableType}}</p>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> -->

    <div>
      <div id="piechart" style="width: 900px; height: 500px;"></div>
    </div>
        <!-- <script type="text/javascript">
          results=getResults({searchResults});
        </script> -->
        <meta property="results" content={{variableType}}>
        <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">County</th>
                <th scope="col">Number of farmers</th>
              </tr>
            </thead>
            <tbody>
                {% for searchResult in searchResults %}
              <tr>
                <td>{{searchResult[0]}}</td>
                <td>{{searchResult[1]}}</td>
              </tr>
              {% endfor %}
            </tbody>
        </table>
        <script type="text/javascript">
          results="{{variableType}}"
          console.log(results.length)

          resultArray=[]
          for (let i=0;i<results.length;i++){
              data=[]
              results.slice(2)
              console.log(results)
              opening=results.indexOf("[")
              if (opening==0){
                results.replace("[","(")
                //console.log(results)
                continue
              }
              else{
                //results.replace("[","(")
                console.log(opening)}
          }
              // data.push(results2[0][0])
              // data.push(results2[0][1])
              // resultArray.push(data)
          // let results=document.getElementById("#results")
          // console.log("results"+results)
          // google.charts.load('current', {'packages':['corechart']});
          // google.charts.setOnLoadCallback(drawChart);
          // let results2 = $("meta[property='results']").attr('content');
          // console.log(results2)
        
          // function drawChart() {
    
          //   var data = google.visualization.arrayToDataTable([
          //     ['Task', 'Hours per Day'],
          //     [,11],
          //     ['Eat',      2],
          //     ['Commute',  2],
          //     ['Watch TV', 2],
          //     ['Sleep',    7]
          //   ]);
    
          //   var options = {
          //     title: 'My Daily Activities'
          //   };
      
          //   var chart = new google.visualization.PieChart(document.getElementById('piechart'));
          //   chart.draw(data, options);
          // }
        </script>
{%endblock%}